<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VV5DY5JBSZ"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-VV5DY5JBSZ');
</script>
<title>Penncamm</title>
<link rel="icon" type="image/png" href="favicon96.png" />
<link rel="stylesheet" href="index.css">
</head>
<body>

<header>
  <h1>Penncamm</h1>
  <nav>
    <a href="#home" class="active">Home</a>
    <a href="#samples">Samples</a>
    <a href="#features">Features</a>
    <a href="#about">About</a>
    <a href="#buy">Buy</a>
    <a href="#legal">Legal</a>
    <a href="https://www.pennbrenn.com" target="_blank">Webring</a>
    <img src="favicon96.png" alt="Logo" style="width:40px; margin-left:10px;">
  </nav>
</header>

<section id="home">
  <h2>Penncamm</h2>
  <img src="penncammcam.png" alt="Penncamm Camera">
  <p>Don't just capture content, capture memories.</p>
</section>

<section id="samples">
  <h2>Sample Photos</h2>
  <img src="sam.png" alt="Standard">
  <img src="sam.png" alt="Fisheye">
  <img src="sam.png" alt="Macro">
  <img src="sam.png" alt="Zoom">
</section>

<section id="features">
  <h2>Features</h2>
  <div class="features-item"><strong>Build Durability:</strong> Stainless steel or reinforced plastic frame.</div>
  <div class="features-item"><strong>Display:</strong> High-definition display.</div>
  <div class="features-item"><strong>Ergonomics:</strong> Textured non-slip leather or foam grip.</div>
  <div class="features-item"><strong>Repairability:</strong> Lifetime warranty.</div>
  <div class="features-item"><strong>Sensor:</strong> 8MP 1080p video.</div>
  <div class="features-item"><strong>Battery:</strong> Up to 2000mAh.</div>
  <div class="features-item"><strong>Interface:</strong> Minimal controls.</div>
  <div class="features-item"><strong>Flash:</strong> Strong auto-exposure flash.</div>
</section>

<section id="about">
  <h2>About Me</h2>
  <p>Basic about me (editable later).</p>
  <button onclick="window.location.href='https://www.pennbrenn.com'">Learn More</button>
</section>

<section id="buy">
  <h2>Buy / Estimate Generator</h2>
  <form id="estimateForm">
    <label for="wrap">Wrap:</label>
    <select id="wrap" multiple></select>

    <label for="accent">Accent:</label>
    <select id="accent" multiple></select>

    <label for="case">Case:</label>
    <select id="case" multiple></select>

    <label for="storage">Storage:</label>
    <select id="storage"></select>

    <label for="lens">Lens:</label>
    <select id="lens" multiple></select>

    <label for="charger">Charger:</label>
    <select id="charger"></select>

    <label for="battery">Battery:</label>
    <select id="battery"></select>

    <label for="emailMsg">Additional Message:</label>
    <textarea id="emailMsg" rows="4" placeholder="Questions? Phone number?"></textarea>

    <button type="button" onclick="generateEmail()">Generate Email</button>
  </form>

  <h3>Email Preview</h3>
  <textarea id="emailPreview" rows="10" readonly></textarea>
</section>

<section id="legal">
  <h2>Legal</h2>
  <button onclick="window.location.href='./legal.html'">View Legal</button>
</section>

<footer></footer>

<script>
let optionsData;
fetch('options.json').then(r=>r.json()).then(data=>{
  optionsData = data;
  function populateSelect(id, obj) {
    const sel = document.getElementById(id);
    for (const key in obj) {
      if (typeof obj[key] === 'number') continue;
      for (const opt in obj[key]) {
        const o = document.createElement('option');
        o.value = key + ': ' + opt;
        o.text = opt + ' ($' + obj[key][opt] + ')';
        sel.add(o);
      }
    }
  }
  populateSelect('wrap', optionsData.Wrap);
  populateSelect('accent', optionsData.Accent);
  populateSelect('case', optionsData.Case);
  populateSelect('storage', optionsData.Storage);
  populateSelect('lens', optionsData.Lens);
  populateSelect('charger', optionsData.Charger);
  populateSelect('battery', optionsData.Battery);
});

function generateEmail(){
  let form = document.getElementById('estimateForm');
  let selections = [];
  let price = optionsData.Parts + optionsData.Labor;

  function addSelect(id, obj) {
    const sel = document.getElementById(id);
    Array.from(sel.selectedOptions).forEach(opt=>{
      const [cat,name] = opt.value.split(': ');
      selections.push(cat + ' - ' + name + ': $' + obj[cat][name]);
      price += obj[cat][name];
    });
  }
  addSelect('wrap', optionsData.Wrap);
  addSelect('accent', optionsData.Accent);
  addSelect('case', optionsData.Case);
  addSelect('storage', optionsData.Storage);
  addSelect('lens', optionsData.Lens);
  addSelect('charger', optionsData.Charger);
  addSelect('battery', optionsData.Battery);

  let msg = document.getElementById('emailMsg').value;

  let emailContent = `To: cam@pennbrenn.com\nSubject: Penncamm Estimate Request\n\nSelected Options:\n${selections.join('\n')}\n\nParts: $${optionsData.Parts}\nLabor: $${optionsData.Labor}\nTotal: $${price}\n\nLead Time: Up to 1 month\n\nAdditional Message:\n${msg}`;

  document.getElementById('emailPreview').value = emailContent;
}

/* Active section highlight */
const sections = document.querySelectorAll('section');
const navLinks = document.querySelectorAll('header nav a');
window.addEventListener('scroll',()=>{
  let fromTop = window.scrollY + 80;
  sections.forEach((sec,i)=>{
    if(sec.offsetTop <= fromTop && sec.offsetTop + sec.offsetHeight > fromTop){
      navLinks.forEach(a=>a.classList.remove('active'));
      navLinks[i].classList.add('active');
    }
  });
});
</script>
</body>
</html>
