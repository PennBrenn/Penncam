<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VV5DY5JBSZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VV5DY5JBSZ');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Penncamm</title>
  <link rel="icon" type="image/png" href="favicon96.png" id="i5zs8q" />
  <meta name="description" content="Penncamm - Don't just capture content, capture memories">

  <link rel="stylesheet" href="index.css">

  <!-- Fonts fallback to Courier & Helvetica as requested -->
  <style>
    @font-face {
      font-family: "SiteCourier";
      src: local("Courier New"), local("Courier"), local("monospace");
    }
    @font-face {
      font-family: "SiteSans";
      src: local("Helvetica"), local("Arial"), local("sans-serif");
    }
  </style>
</head>
<body>
  <header id="site-header" class="header">
    <div class="header-left">Penncamm</div>
    <nav class="header-center" id="header-nav" aria-label="Main navigation">
      <a class="nav-link active" href="#home">Home</a>
      <a class="nav-link" href="#samples">Samples</a>
      <a class="nav-link" href="#features">Features</a>
      <a class="nav-link" href="#about">About</a>
      <a class="nav-link" href="#buy">Estimate</a>
      <a class="nav-link" href="#legal">Legal</a>
    </nav>
    <div class="header-right">
      <img src="favicon96.png" alt="Penncamm logo" class="logo">
      <a class="webring-button" href="https://www.pennbrenn.com" target="_blank" rel="noopener">PennBrenn Webring</a>
    </div>
  </header>

  <main id="main">
    <!-- HOME -->
    <section id="home" class="section hero">
      <div class="glass">
        <h1 class="title">Penncamm</h1>
        <img src="penncammcam.png" alt="Penncamm camera" class="hero-image">
        <p class="lead">Don't just capture content, capture memories.</p>
        <div class="down-hint">↓</div>
      </div>
    </section>

    <!-- SAMPLES -->
    <section id="samples" class="section samples">
      <div class="glass">
        <h2 class="section-title">Sample Photos</h2>
        <div class="sample-grid">
          <figure><img src="sample_standard.jpg" alt="Standard sample"><figcaption>Standard</figcaption></figure>
          <figure><img src="sample_fisheye.jpg" alt="Fisheye sample"><figcaption>Fisheye</figcaption></figure>
          <figure><img src="sample_macro.jpg" alt="Macro sample"><figcaption>Macro</figcaption></figure>
          <figure><img src="sample_zoom.jpg" alt="Zoom sample"><figcaption>Zoom</figcaption></figure>
        </div>
      </div>
    </section>

    <!-- FEATURES -->
    <section id="features" class="section features">
      <div class="glass">
        <h2 class="section-title">Features</h2>

        <div class="features-grid">
          <div>
            <h3>Build & Durability</h3>
            <p>A stainless steel or reinforced plastic frame ensures durability in every moment.</p>
          </div>
          <div>
            <h3>Display</h3>
            <p>A high-definition display lets you see your memories as they were meant to be seen.</p>
          </div>
          <div>
            <h3>Ergonomics</h3>
            <p>A textured, non-slip leather or foam grip ensures secure, comfortable handling.</p>
          </div>
          <div>
            <h3>Repairability</h3>
            <p>With a lifetime warranty, you can be reassured that you'll have every moment.</p>
          </div>

          <div>
            <h3>Sensor</h3>
            <p>An 8MP sensor with 1080p video allows every moment to be captured with clear, vivid detail.</p>
          </div>
          <div>
            <h3>Battery</h3>
            <p>Up to a 2000mAh battery gives you extended time to get every detail without interruption.</p>
          </div>
          <div>
            <h3>Interface</h3>
            <p>With minimal controls, capturing memories becomes second nature.</p>
          </div>
          <div>
            <h3>Flash</h3>
            <p>A strong flash, combined with the camera's auto exposure, lets every moment be lit.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section about">
      <div class="glass">
        <h2 class="section-title">About Me</h2>
        <p class="paragraph">Basic about me (you can edit later).</p>
        <a class="button" href="https://www.pennbrenn.com" target="_blank" rel="noopener">Learn more</a>
      </div>
    </section>

    <!-- BUY / ESTIMATE GENERATOR -->
    <section id="buy" class="section buy">
      <div class="glass">
        <h2 class="section-title">Get an Estimate</h2>
        <p class="paragraph">We don't do direct checkout — every Penncamm is individually quoted and crafted. Select options below and generate an email to cam@pennbrenn.com. Lead time: up to 1 month.</p>

        <div id="estimate-form" class="estimate-form">
          <div class="field">
            <label for="wrap">Wrap</label>
            <select id="wrap" class="single-select"></select>
          </div>

          <div class="field">
            <label for="material">Material / Frame</label>
            <select id="material" class="single-select"></select>
          </div>

          <div class="field">
            <label for="accent">Accent</label>
            <select id="accent" class="single-select"></select>
          </div>

          <div class="field">
            <label for="case">Case</label>
            <select id="case" class="single-select"></select>
          </div>

          <div class="field">
            <label for="colorfade">Color fade</label>
            <select id="colorfade" class="single-select"></select>
          </div>

          <div class="field">
            <label for="storage">Storage</label>
            <select id="storage" class="single-select"></select>
          </div>

          <div class="field">
            <label for="lens">Lens (select all that apply)</label>
            <select id="lens" class="multi-select" multiple></select>
          </div>

          <div class="field">
            <label for="charger">Charger</label>
            <select id="charger" class="single-select"></select>
          </div>

          <div class="field">
            <label for="battery">Battery</label>
            <select id="battery" class="single-select"></select>
          </div>

          <div class="summary">
            <p><strong>Parts:</strong> $<span id="parts-price">15.00</span>  <strong>Labor:</strong> $<span id="labor-price">40.00</span></p>
            <p><strong>Subtotal:</strong> $<span id="subtotal">0.00</span></p>
            <p><strong>Lead time:</strong> Up to 1 month</p>
            <div class="actions">
              <button id="generate-email" class="button">Generate Email</button>
              <button id="copy-body" class="button secondary">Copy Email Body</button>
            </div>
            <p id="mailto-link" class="mailto-link small"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- LEGAL -->
    <section id="legal" class="section legal">
      <div class="glass">
        <h2 class="section-title">Legal</h2>
        <p class="paragraph">Penncamm — handcrafted cameras. Lifetime warranty against manufacturing defects (no abuse). US-based, California jurisdiction. Returns only for defects. Payment methods, privacy, and more can be included here.<p>
        <button class="button" id="download-legal">Open Legal (printable)</button>
      </div>
    </section>

  </main>

  <footer class="footer">
    <p class="small">© Penncamm — handcrafted digital cameras. Built to last.</p>
  </footer>

  <!-- fallback options embedded so site works locally (if fetch blocked) -->
  <script id="options-fallback" type="application/json">
  {
    "wrap": [
      {"name":"Real Leather — Tan","price":45},
      {"name":"Real Leather — Black","price":45},
      {"name":"Foam — Black","price":12},
      {"name":"Foam — White","price":12},
      {"name":"Foam — Red","price":12}
    ],
    "material": [
      {"name":"Steel","price":60},
      {"name":"Titanium","price":150},
      {"name":"Iron (rusts)","price":40},
      {"name":"Brass","price":70},
      {"name":"Copper","price":70},
      {"name":"Gold","price":250},
      {"name":"Plastic — Black","price":10},
      {"name":"Plastic — Clear","price":10}
    ],
    "accent": [
      {"name":"Real Leather — Brown","price":30},
      {"name":"Metal — Steel Accent","price":25},
      {"name":"Reflective","price":18},
      {"name":"Carbon","price":40}
    ],
    "case": [
      {"name":"Steel Case","price":90},
      {"name":"Titanium Case","price":220},
      {"name":"Plastic Case — Black","price":25},
      {"name":"Leather Case","price":60}
    ],
    "colorfade": [
      {"name":"Clear","price":0},
      {"name":"Subtle fade","price":12},
      {"name":"Heavy fade","price":25}
    ],
    "storage": [
      {"name":"None","price":0},
      {"name":"16GB (~1h|200 photos)","price":8},
      {"name":"32GB (~3h|600 photos)","price":12},
      {"name":"64GB (~6h|1200 photos)","price":20},
      {"name":"128GB (~12h|2400 photos)","price":35},
      {"name":"256GB (~32h|6000 photos)","price":60}
    ],
    "lens": [
      {"name":"Basic","price":0},
      {"name":"Macro","price":25},
      {"name":"Fisheye","price":30},
      {"name":"Zoom (>10x)","price":80}
    ],
    "charger": [
      {"name":"None (Use own)","price":0},
      {"name":"USB-C","price":12}
    ],
    "battery": [
      {"name":"2000mAh (>6h)","price":25},
      {"name":"380mAh (>3h)","price":12}
    ]
  }
  </script>

  <script>
  // JS kept in HTML per spec.
  (function(){
    const OPTS_URL = 'options.json';
    const partsPrice = 15;
    const laborPrice = 40;

    const ids = ['wrap','material','accent','case','colorfade','storage','lens','charger','battery'];

    // helper to populate select element
    function populateSelect(el, items, multi=false) {
      el.innerHTML = '';
      items.forEach((it, idx) => {
        const option = document.createElement('option');
        option.value = idx;
        option.textContent = `${it.name} — $${Number(it.price).toFixed(2)}`;
        option.dataset.price = Number(it.price);
        el.appendChild(option);
      });
    }

    async function loadOptions() {
      try {
        const res = await fetch(OPTS_URL);
        if (!res.ok) throw new Error('json fetch failed');
        return await res.json();
      } catch (e) {
        // fallback to embedded options (works if user opens file locally)
        try {
          const fallback = document.getElementById('options-fallback').textContent;
          return JSON.parse(fallback);
        } catch (ee) {
          console.error('No options available', ee);
          return {};
        }
      }
    }

    function getSelectedPrice(select) {
      if (!select) return 0;
      if (select.multiple) {
        let total = 0;
        Array.from(select.selectedOptions).forEach(opt=> total += Number(opt.dataset.price || 0));
        return total;
      } else {
        const opt = select.selectedOptions[0];
        return opt ? Number(opt.dataset.price||0) : 0;
      }
    }

    function getSelectedNames(select, categoryName) {
      if (!select) return [];
      if (select.multiple) {
        return Array.from(select.selectedOptions).map(o => `${categoryName}: ${o.textContent}`);
      } else {
        const o = select.selectedOptions[0];
        return o ? [`${categoryName}: ${o.textContent}`] : [];
      }
    }

    function formatCurrency(n) {
      return Number(n).toFixed(2);
    }

    function updateSubtotal() {
      const subtotalEl = document.getElementById('subtotal');
      let total = partsPrice + laborPrice;
      ids.forEach(id => {
        const el = document.getElementById(id);
        total += getSelectedPrice(el);
      });
      subtotalEl.textContent = formatCurrency(total);
    }

    function buildEmailBody() {
      const lines = [];
      lines.push('Penncamm Estimate Request');
      lines.push('');
      ids.forEach(id => {
        const el = document.getElementById(id);
        const names = getSelectedNames(el, id.charAt(0).toUpperCase() + id.slice(1));
        names.forEach(n => lines.push(n));
      });
      lines.push('');
      lines.push(`Parts: $${formatCurrency(partsPrice)}`);
      lines.push(`Labor: $${formatCurrency(laborPrice)}`);
      lines.push(`Subtotal: $${document.getElementById('subtotal').textContent}`);
      lines.push('');
      lines.push('Notes: ');
      lines.push('Lead time: up to 1 month.');
      lines.push('');
      lines.push('Customer email: ');
      return lines.join('\n');
    }

    function attachListeners() {
      ids.forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.addEventListener('change', updateSubtotal);
      });

      document.getElementById('generate-email').addEventListener('click', function(){
        const subject = encodeURIComponent('Penncamm Estimate Request');
        const body = encodeURIComponent(buildEmailBody());
        const mailto = `mailto:cam@pennbrenn.com?subject=${subject}&body=${body}`;
        // show link and open mail client
        const mailtoLinkEl = document.getElementById('mailto-link');
        mailtoLinkEl.innerHTML = `<a href="${mailto}" target="_blank" rel="noopener">Open email client</a>`;
        // Also open mail client in new tab/window
        window.location.href = mailto;
      });

      document.getElementById('copy-body').addEventListener('click', async function(){
        const body = buildEmailBody();
        try {
          await navigator.clipboard.writeText(body);
          alert('Email body copied to clipboard — paste into your email client and send to cam@pennbrenn.com');
        } catch (err) {
          // fallback: show in a prompt
          prompt('Copy the below email body and paste into your mail client (Ctrl+C then Enter):', body);
        }
      });

      document.getElementById('download-legal').addEventListener('click', function(){
        const legalText = `Penncamm Legal\n\nLifetime warranty against manufacturing defects (no abuse).\nUS-based, California jurisdiction.\nReturns only for defects.\nLead time up to 1 month.\nMore terms: contact cam@pennbrenn.com`;
        const w = window.open('', '_blank');
        if (w) {
          w.document.write('<pre style="white-space: pre-wrap;font-family: inherit;">' + legalText + '</pre>');
          w.document.title = 'Penncamm Legal';
        } else {
          alert(legalText);
        }
      });
    }

    // Scrollspy: highlight nav link of section in view
    function initScrollSpy() {
      const navLinks = document.querySelectorAll('.nav-link');
      const sections = Array.from(document.querySelectorAll('section'));
      const opts = { root: null, rootMargin: '0px', threshold: 0.45 };
      const observer = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if (entry.isIntersecting) {
            navLinks.forEach(a => a.classList.remove('active'));
            const link = document.querySelector(`.nav-link[href="#${entry.target.id}"]`);
            if (link) link.classList.add('active');
          }
        });
      }, opts);
      sections.forEach(s => observer.observe(s));
    }

    // Smooth nav clicks
    function initNavClicks() {
      document.querySelectorAll('.nav-link').forEach(a=>{
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          const id = a.getAttribute('href').slice(1);
          const el = document.getElementById(id);
          if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
        });
      });
    }

    // header shrink on scroll
    function initHeaderBehavior() {
      const header = document.getElementById('site-header');
      let lastY = window.scrollY;
      window.addEventListener('scroll', ()=>{
        if (window.scrollY > 40) header.classList.add('scrolled');
        else header.classList.remove('scrolled');
        lastY = window.scrollY;
      });
    }

    // main init
    (async function init(){
      const opts = await loadOptions();

      // populate selects
      const mapping = {
        wrap: opts.wrap || [],
        material: opts.material || [],
        accent: opts.accent || [],
        case: opts.case || [],
        colorfade: opts.colorfade || [],
        storage: opts.storage || [],
        lens: opts.lens || [],
        charger: opts.charger || [],
        battery: opts.battery || []
      };

      // build selects
      Object.keys(mapping).forEach(key => {
        const el = document.getElementById(key);
        if (!el) return;
        populateSelect(el, mapping[key], el.multiple);
      });

      // set defaults (first option)
      ids.forEach(id=>{
        const el = document.getElementById(id);
        if (!el) return;
        if (el.multiple) {
          // select first by default
          if (el.options.length>0) el.options[0].selected = true;
        } else {
          el.selectedIndex = 0;
        }
      });

      // set parts & labor displays
      document.getElementById('parts-price').textContent = Number(partsPrice).toFixed(2);
      document.getElementById('labor-price').textContent = Number(laborPrice).toFixed(2);

      attachListeners();
      updateSubtotal();
      initScrollSpy();
      initNavClicks();
      initHeaderBehavior();
    })();

  })();
  </script>
</body>
</html>
