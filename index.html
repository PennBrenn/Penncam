<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VV5DY5JBSZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VV5DY5JBSZ');
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Penncamm</title>
  <link rel="icon" type="image/png" href="favicon96.png" id="i5zs8q" />
  <meta name="description" content="Penncamm - Dont just capture content, capture memories" />
  <link rel="stylesheet" href="index.css" />
  <!--bg color-->
    <style>
    :root{
      --color-a: #000000;
      --color-b: #465e73;
    }

    html,body{
      height: 100%;
      margin: 0;
    }

    /* Keyframes from black to target color */
    @keyframes bgColorShift {
      from { background-color: var(--color-a); }
      to   { background-color: var(--color-b); }
    }

    /* --- Default: 10s to go from A → B, then 10s back (alternate ping-pong) --- */
    body{
      min-height: 100vh;
      display: grid;
      place-items: center;
      color: white;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      animation: bgColorShift 10s linear infinite alternate;
    }

    /* If you prefer a one-way 10s animation that instantly jumps back and repeats,
       replace the body rule above with this:
    body {
      animation: bgColorShift 10s steps(1,end) infinite;
    }
    (Uncomment and use that instead — but the ping-pong version looks smoother.)
    */

    /* Respect user motion preferences */
    @media (prefers-reduced-motion: reduce) {
      body { animation: none; background-color: var(--color-a); }
    }
  </style>
</head>
<body>

  <!-- Sticky header -->
  <header id="site-header" class="site-header">
    <div class="header-left">Penncamm</div>
    <nav class="header-nav" id="nav">
      <a href="#home" class="nav-item active" data-target="home">Home</a>
      <a href="#samples" class="nav-item" data-target="samples">Samples</a>
      <a href="#features" class="nav-item" data-target="features">Features</a>
      <a href="#about" class="nav-item" data-target="about">About</a>
      <a href="#buy" class="nav-item" data-target="buy">Buy / Estimate</a>
      <a href="#legal" class="nav-item" data-target="legal">Legal</a>
    </nav>
    <div class="header-right">
      <img src="favicon96.png" alt="Penncamm logo" class="logo" />
      <a class="webring-btn" href="https://www.pennbrenn.com" target="_blank" rel="noopener">Pennbrenn</a>
    </div>
  </header>

  <!-- Provide spacing so header doesn't block top title -->
  <main id="main">
    <!-- Hero / Home -->
    <section id="home" class="panel hero">
      <div class="glass">
        <h1 class="title">Penncamm</h1>
        <img src="penncammcam.png" alt="Penncamm camera" class="hero-image" />
        <p class="lead">Don't just capture content, capture memories.</p>
      </div>
    </section>

    <!-- Samples -->
    <section id="samples" class="panel samples">
      <div class="glass">
        <h2 class="section-title">Sample Photos — Lenses</h2>
        <div class="sample-grid">
          <figure>
            <img src="sample_standard.jpg" alt="Standard lens sample" />
            <figcaption>Standard</figcaption>
          </figure>
          <figure>
            <img src="sample_fisheye.jpg" alt="Fisheye sample" />
            <figcaption>Fisheye</figcaption>
          </figure>
          <figure>
            <img src="sample_macro.jpg" alt="Macro sample" />
            <figcaption>Macro</figcaption>
          </figure>
          <figure>
            <img src="sample_zoom.jpg" alt="Zoom sample" />
            <figcaption>Zoom</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section id="features" class="panel features">
      <div class="glass">
        <h2 class="section-title">Features</h2>

        <div class="features-columns">
          <div>
            <h3>Build & Durability</h3>
            <p>A stainless steel or reinforced plastic frame ensures durability in every moment.</p>

            <h3>Display</h3>
            <p>A high-definition display lets you see your memories as they were meant to be seen.</p>

            <h3>Ergonomics</h3>
            <p>A textured, non-slip leather or foam grip ensures secure, comfortable handling.</p>

            <h3>Repairability</h3>
            <p>With a lifetime warranty, you can be reassured that you'll have every moment.</p>
          </div>

          <div>
            <h3>Technology</h3>
            <p><strong>Sensor</strong> — An 8MP sensor with 1080p video allows every moment to be captured with clear, vivid detail.</p>
            <p><strong>Battery</strong> — Up to a 2000mAh battery gives you extended time to get every detail without interruption.</p>
            <p><strong>Interface</strong> — With minimal controls, capturing memories becomes second nature.</p>
            <p><strong>Flash</strong> — A strong flash, combined with the camera's auto exposure, lights every moment.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="panel about">
      <div class="glass">
        <h2 class="section-title">About</h2>
        <p class="paragraph">
          Basic about me — (you can edit this later). We handcraft every camera, focusing on longevity, repairability, and timeless design.
        </p>
        <a class="btn" href="https://www.pennbrenn.com" target="_blank" rel="noopener">Learn more</a>
      </div>
    </section>

    <!-- Buy / Estimate -->
    <section id="buy" class="panel buy">
      <div class="glass">
        <h2 class="section-title">Get an Estimate</h2>

        <p class="lead small">We quote each camera individually. Use this tool to build your configuration — it generates an email you can copy or send to <code>cam@pennbrenn.com</code>.</p>

        <form id="estimate-form" class="estimate-form" onsubmit="return false;">
          <div class="form-row">
            <label for="customer-name">Your name</label>
            <input id="customer-name" type="text" placeholder="Full name" />
            <label for="customer-email">Email</label>
            <input id="customer-email" type="email" placeholder="you@example.com" />
            <label for="customer-phone">Phone</label>
            <input id="customer-phone" type="tel" placeholder="+1 555 555 5555" />
          </div>

          <div id="options-container" class="options-container">
            <!-- Options appear here after options.json is loaded -->
            <p class="muted">Loading options…</p>
          </div>

          <div class="fixed-fees">
            <div>Parts: <strong>$15.00</strong></div>
            <div>Labor: <strong>$40.00</strong></div>
            <div class="lead-time">Lead time: <strong>Up to 1 month</strong></div>
          </div>

          <div class="preview-and-total">
            <div class="total">
              <div>Total:</div>
              <div id="total-value" class="total-value">$0.00</div>
            </div>

            <label for="notes">Questions / Notes</label>
            <textarea id="notes" rows="4" placeholder="Add any special requests or questions..."></textarea>
            <div class="email-actions">
              <button id="generate" class="btn">Generate Email</button>
              <button id="copy" class="btn ghost">Copy Email Text</button>
              <a id="mailto-link" class="btn ghost" href="#" target="_blank" rel="noopener">Open Mail Client</a>
            </div>
            <label for="email-preview">Email preview (editable)</label>
            <textarea id="email-preview" rows="8"></textarea>
          </div>
        </form>
      </div>
    </section>

    <!-- Legal -->
    <section id="legal" class="panel legal">
      <div class="glass">
        <h2 class="section-title">Legal</h2>
        <p class="paragraph">All legal info is available on the dedicated legal page.</p>
        <a class="btn" href="./legal.html" target="_blank">Open legal</a>
      </div>
    </section>

    <footer class="site-footer">
      <div>
        <img src="sam.png" alt="sample" class="small-sample" />
      </div>
      <div>© Penncamm — handcrafted digital cameras</div>
    </footer>
  </main>

  <script>
    /***************
     * Helper & UI
     ***************/
    const header = document.getElementById('site-header');
    const navItems = Array.from(document.querySelectorAll('.nav-item'));
    const sections = Array.from(document.querySelectorAll('section.panel'));
    const headerHeight = header.offsetHeight;

    // make header follow user: we use position: fixed in CSS
    // IntersectionObserver to update active nav item
    const obsOptions = {
      root: null,
      rootMargin: `-${headerHeight}px 0px 0px 0px`,
      threshold: 0.5
    };

    const sectionObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const id = entry.target.id;
        const navLink = document.querySelector(`.nav-item[data-target="${id}"]`);
        if (entry.isIntersecting) {
          navItems.forEach(n => n.classList.remove('active'));
          if (navLink) navLink.classList.add('active');
        }
      });
    }, obsOptions);

    sections.forEach(s => sectionObserver.observe(s));


    // Smooth scroll for nav
    document.querySelectorAll('.nav-item').forEach(a => {
      a.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.getElementById(a.dataset.target);
        const y = target.getBoundingClientRect().top + window.scrollY - headerHeight - 10;
        window.scrollTo({ top: y, behavior: 'smooth' });
      });
    });

    /****************
     * Load options.json and render selects
     ****************/
    const optionsContainer = document.getElementById('options-container');
    let OPTIONS = null;
    let selected = {
      Wrap: [],
      Accent: [],
      Case: [],
      Storage: [],
      Lens: [],
      Charger: [],
      Battery: []
    };

    function money(n){ return `$${Number(n).toFixed(2)}`; }

    async function loadOptions() {
      try {
        const res = await fetch('options.json');
        OPTIONS = await res.json();
      } catch (err) {
        console.error('Could not load options.json', err);
        optionsContainer.innerHTML = '<p class="error">Could not load options.json — make sure it is present next to the HTML file.</p>';
        return;
      }

      // Build UI for categories
      optionsContainer.innerHTML = '';
      Object.keys(OPTIONS).forEach(cat => {
        const box = document.createElement('div');
        box.className = 'option-box';
        const title = document.createElement('h4');
        title.textContent = cat;
        box.appendChild(title);

        // For Lens, use multi-select checkboxes with select-all
        if (cat === 'Lens') {
          const selectAll = document.createElement('button');
          selectAll.type = 'button';
          selectAll.className = 'select-all';
          selectAll.textContent = 'Select all';
          box.appendChild(selectAll);

          const list = document.createElement('div');
          list.className = 'option-list multi';
          OPTIONS[cat].forEach(opt => {
            const label = document.createElement('label');
            label.className = 'optrow';
            const cb = document.createElement('input');
            cb.type = 'checkbox';
            cb.dataset.cat = cat;
            cb.value = opt.name;
            cb.dataset.price = opt.price;
            const name = document.createElement('span');
            name.className = 'opt-name';
            name.textContent = opt.name;
            const price = document.createElement('span');
            price.className = 'opt-price';
            price.textContent = money(opt.price);
            label.appendChild(cb);
            label.appendChild(name);
            label.appendChild(price);
            list.appendChild(label);
          });
          box.appendChild(list);

          selectAll.addEventListener('click', () => {
            const checks = list.querySelectorAll('input[type="checkbox"]');
            const allChecked = Array.from(checks).every(c=>c.checked);
            checks.forEach(c => c.checked = !allChecked);
            updateSelection();
          });

        } else {
          // For other categories use scrollable single-select list styled to look like dropdown
          const sel = document.createElement('div');
          sel.className = 'option-list single';
          OPTIONS[cat].forEach(opt => {
            const label = document.createElement('label');
            label.className = 'optrow';
            const rb = document.createElement('input');
            rb.type = 'radio';
            rb.name = `radio-${cat}`;
            rb.dataset.cat = cat;
            rb.value = opt.name;
            rb.dataset.price = opt.price;
            // For storage we allow None as an option
            const name = document.createElement('span');
            name.className = 'opt-name';
            name.textContent = opt.name;
            const price = document.createElement('span');
            price.className = 'opt-price';
            price.textContent = opt.price ? money(opt.price) : '—';
            label.appendChild(rb);
            label.appendChild(name);
            label.appendChild(price);
            sel.appendChild(label);
          });
          box.appendChild(sel);
        }

        optionsContainer.appendChild(box);
      });

      // Bind change listeners
      optionsContainer.addEventListener('change', updateSelection);
      document.getElementById('generate').addEventListener('click', generateEmail);
      document.getElementById('copy').addEventListener('click', copyEmailText);
      document.getElementById('mailto-link').addEventListener('click', openMailClient);

      // initial total
      updateSelection();
    }

    function updateSelection() {
      // reset
      selected = {
        Wrap: [],
        Accent: [],
        Case: [],
        Storage: [],
        Lens: [],
        Charger: [],
        Battery: []
      };

      const inputs = optionsContainer.querySelectorAll('input');
      inputs.forEach(i => {
        const cat = i.dataset.cat;
        const name = i.value;
        const price = parseFloat(i.dataset.price) || 0;
        if (!cat) return;
        if (i.type === 'checkbox' && i.checked) {
          selected[cat].push({name, price});
        } else if (i.type === 'radio' && i.checked) {
          selected[cat] = [{name, price}];
        }
      });

      // compute total: base parts+labor + selected item prices
      const parts = 15;
      const labor = 40;
      let total = parts + labor;
      Object.keys(selected).forEach(cat => {
        selected[cat].forEach(it => total += (Number(it.price) || 0));
      });

      // Update total display and show selected items with price
      document.getElementById('total-value').textContent = money(total);

      // Build email preview
      buildEmailPreview(total);
    }

    function buildEmailPreview(total) {
      const name = document.getElementById('customer-name').value || '[Your name]';
      const email = document.getElementById('customer-email').value || '[Your email]';
      const phone = document.getElementById('customer-phone').value || '[Phone]';
      const notes = document.getElementById('notes').value || '';

      const lines = [];
      lines.push(`To: cam@pennbrenn.com`);
      lines.push(`From: ${name} <${email}>`);
      lines.push(`Phone: ${phone}`);
      lines.push('');
      lines.push(`Subject: Penncamm custom quote request`);
      lines.push('');
      lines.push(`Hello,`);
      lines.push('');
      lines.push(`I'd like a quote for a custom Penncamm with the following options:`);
      lines.push('');

      Object.keys(selected).forEach(cat => {
        if (selected[cat].length === 0) return;
        lines.push(`${cat}:`);
        selected[cat].forEach(it => {
          lines.push(` - ${it.name} — ${money(it.price || 0)}`);
        });
        lines.push('');
      });

      lines.push(`Parts: ${money(15)}`);
      lines.push(`Labor: ${money(40)}`);
      lines.push('');
      lines.push(`Estimated total: ${money(total)}`);
      lines.push('');
      lines.push(`Lead time: up to 1 month.`);
      lines.push('');
      if (notes) {
        lines.push('Notes:');
        lines.push(notes);
        lines.push('');
      }
      lines.push('Please let me know if you need more info. Thanks!');
      lines.push('');
      lines.push(`${name}`);

      const emailText = lines.join('\n');
      document.getElementById('email-preview').value = emailText;

      // update mailto link
      const subject = encodeURIComponent('Penncamm custom quote request');
      const body = encodeURIComponent(emailText);
      const mailto = `mailto:cam@pennbrenn.com?subject=${subject}&body=${body}`;
      const mailtoLink = document.getElementById('mailto-link');
      mailtoLink.href = mailto;
    }

    function generateEmail() {
      // ensure preview is up to date
      updateSelection();
      alert('Email generated in the preview box. You can copy it or open your mail client.');
    }

    function copyEmailText() {
      const preview = document.getElementById('email-preview');
      preview.select();
      preview.setSelectionRange(0, 99999);
      try {
        document.execCommand('copy');
        alert('Email text copied to clipboard.');
      } catch (e) {
        alert('Copy failed. Please select and copy the preview text manually.');
      }
    }

    function openMailClient(e) {
      // mailto link will open mail client
      // let default action proceed
    }

    // load options on ready
    window.addEventListener('load', loadOptions);

  </script>
</body>
</html>

