<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VV5DY5JBSZ"></script>
<script> 
window.dataLayer = window.dataLayer || []; 
function gtag(){dataLayer.push(arguments);} 
gtag('js', new Date()); 
gtag('config', 'G-VV5DY5JBSZ'); 
</script>
<title>Penncamm</title>
<link rel="icon" type="image/png" href="favicon96.png" />
<link rel="stylesheet" href="index.css">
</head>
<body>

<header>
  <h1>Penncamm</h1>
  <nav>
    <a href="#home" class="active">Home</a>
    <a href="#samples">Samples</a>
    <a href="#features">Features</a>
    <a href="#about">About</a>
    <a href="#buy">Buy</a>
    <a href="#legal">Legal</a>
    <a href="https://www.pennbrenn.com" target="_blank"><img src="favicon96.png" width="30" style="vertical-align: middle;"></a>
  </nav>
</header>

<section id="home">
  <h2>Penncamm</h2>
  <img src="penncammcam.png" alt="Camera">
  <p>Don't just capture content, capture memories.</p>
</section>

<section id="samples">
  <h2>Sample Photos</h2>
  <div class="samples">
    <img src="sam.png" alt="Standard">
    <img src="sam.png" alt="Fisheye">
    <img src="sam.png" alt="Macro">
    <img src="sam.png" alt="Zoom">
  </div>
</section>

<section id="features">
  <h2>Features</h2>
  <div class="features">
    <div class="feature"><h3>Build Durability</h3><p>A stainless steel or reinforced plastic frame ensures durability in every moment.</p></div>
    <div class="feature"><h3>Display</h3><p>A high-definition display lets you see your memories as they were meant to be seen.</p></div>
    <div class="feature"><h3>Ergonomics</h3><p>A textured, non-slip leather or foam grip ensures secure, comfortable handling.</p></div>
    <div class="feature"><h3>Repairability</h3><p>With a lifetime warranty, you can be reassured that you'll have every moment.</p></div>
    <div class="feature"><h3>Sensor</h3><p>An 8MP sensor with 1080p video allows every moment to be captured with clear, vivid detail.</p></div>
    <div class="feature"><h3>Battery</h3><p>Up to a 2000mAh battery gives you extended time to get every detail without interruption.</p></div>
    <div class="feature"><h3>Interface</h3><p>With minimal controls, capturing memories becomes second nature.</p></div>
    <div class="feature"><h3>Flash</h3><p>A strong flash, combined with the camera's auto exposure, lets every moment be lit.</p></div>
  </div>
</section>

<section id="about">
  <h2>About Me</h2>
  <p>Basic about me (editable later)</p>
  <a href="https://www.pennbrenn.com" target="_blank"><button class="legal-btn">Learn More</button></a>
</section>

<section id="buy">
  <h2>Get a Quote</h2>
  <form class="buy-form" id="buyForm">
    <!-- Options will be populated by JS -->
  </form>
  <h3>Email Preview:</h3>
  <div id="emailPreview"></div>
</section>

<section id="legal">
  <h2>Legal</h2>
  <p>All legal information can be accessed here.</p>
  <a href="./legal.html"><button class="legal-btn">View Legal</button></a>
</section>

<script>
const optionsData = {};
fetch('options.json').then(res => res.json()).then(data => {
  Object.assign(optionsData, data);
  generateForm();
});

const buyForm = document.getElementById('buyForm');
const emailPreview = document.getElementById('emailPreview');
const partsPrice = 15;
const laborPrice = 40;

function generateForm() {
  for (let category in optionsData) {
    const div = document.createElement('div');
    div.innerHTML = `<label>${category}
      <select multiple data-category="${category}"></select>
    </label>`;
    const select = div.querySelector('select');
    for (let item in optionsData[category]) {
      const option = document.createElement('option');
      option.value = item;
      option.textContent = `${item} ($${optionsData[category][item]})`;
      select.appendChild(option);
    }
    buyForm.appendChild(div);
  }
  const btn = document.createElement('button');
  btn.type = 'button';
  btn.textContent = 'Generate Email';
  btn.onclick = generateEmail;
  buyForm.appendChild(btn);
}

function generateEmail() {
  let emailText = `To: cam@pennbrenn.com\nSubject: Penncamm Quote Request\n\nSelected Options:\n`;
  let total = partsPrice + laborPrice;
  for (let select of buyForm.querySelectorAll('select')) {
    const category = select.dataset.category;
    const values = Array.from(select.selectedOptions).map(o => o.value);
    if(values.length) {
      emailText += `\n${category}: ${values.join(', ')}\n`;
      for (let v of values) total += optionsData[category][v];
    }
  }
  emailText += `\nParts: $${partsPrice}\nLabor: $${laborPrice}\nLead time: up to 1 month\nTotal: $${total}`;
  emailPreview.textContent = emailText;
}

/* Header highlight on scroll */
const sections = document.querySelectorAll('section');
const navLinks = document.querySelectorAll('header nav a');
window.addEventListener('scroll', ()=>{
  let current = '';
  sections.forEach(section => {
    const sectionTop = section.offsetTop - 70;
    if(pageYOffset >= sectionTop) current = section.getAttribute('id');
  });
  navLinks.forEach(a => {
    a.classList.remove('active');
    if(a.getAttribute('href') === '#'+current) a.classList.add('active');
  });
});
</script>

</body>
</html>
