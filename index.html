<!doctype html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VV5DY5JBSZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VV5DY5JBSZ');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Penncamm</title>
  <link rel="icon" type="image/png" href="favicon96.png" id="i5zs8q" />
  <meta name="description" content="Penncamm - Don't just capture content, capture memories" />

  <link rel="stylesheet" href="index.css" />

  <style>
    /* Inline fallback font rules if external fonts not present - titles use Courier */
    :root{
      --title-color: #fafdff;
      --paragraph-color: #d7d7dc;
      --accent: #465e73;
      --bg: #000000;
      --glass-alpha: 0.12;
    }
  </style>
</head>
<body>
  <header id="site-header" class="header">
    <div class="header-left">Penncamm</div>
    <nav id="site-nav" class="header-nav">
      <a href="#home" class="nav-link active">Home</a>
      <a href="#samples" class="nav-link">Samples</a>
      <a href="#features" class="nav-link">Features</a>
      <a href="#about" class="nav-link">About</a>
      <a href="#buy" class="nav-link">Buy / Estimate</a>
      <a href="#legal" class="nav-link">Legal</a>
    </nav>
    <div class="header-right">
      <img src="favicon96.png" alt="Penncamm logo" class="logo" />
      <a class="webring-btn" href="https://www.pennbrenn.com" target="_blank" rel="noopener">PennBrenn Webring</a>
    </div>
  </header>

  <main id="main" class="main">
    <!-- Hero / Home -->
    <section id="home" class="section hero">
      <div class="glass">
        <h1 class="title">Penncamm</h1>
        <img src="penncammcam.png" alt="Penncamm camera" class="hero-image" />
        <p class="tagline">Don't just capture content, capture memories.</p>
      </div>
    </section>

    <!-- Samples -->
    <section id="samples" class="section">
      <div class="glass">
        <h2 class="section-title">Sample Photos — Lenses</h2>
        <div class="samples-grid">
          <figure><img src="sam.png" alt="standard sample"><figcaption>Standard</figcaption></figure>
          <figure><img src="sam.png" alt="fisheye sample"><figcaption>Fisheye</figcaption></figure>
          <figure><img src="sam.png" alt="macro sample"><figcaption>Macro</figcaption></figure>
          <figure><img src="sam.png" alt="zoom sample"><figcaption>Zoom</figcaption></figure>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section id="features" class="section">
      <div class="glass">
        <h2 class="section-title">Features</h2>
        <div class="feature-columns">
          <div>
            <h3>Build Durability</h3>
            <p>A stainless steel or reinforced plastic frame ensures durability in every moment.</p>
            <h3>Display</h3>
            <p>A high-definition display lets you see your memories as they were meant to be seen.</p>
            <h3>Ergonomics</h3>
            <p>A textured, non-slip leather or foam grip ensures secure, comfortable handling.</p>
            <h3>Repairability</h3>
            <p>With a lifetime warranty, you can be reassured that you'll have every moment.</p>
          </div>
          <div>
            <h3>Technology</h3>
            <p><strong>Sensor</strong> — An 8MP sensor with 1080p video allows every moment to be captured with clear, vivid detail.</p>
            <p><strong>Battery</strong> — Up to a 2000mAh battery gives you extended time to get every detail without interruption.</p>
            <p><strong>Interface</strong> — With minimal controls, capturing memories becomes second nature.</p>
            <p><strong>Flash</strong> — A strong flash, combined with the camera's auto exposure, lets every moment be lit.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="section">
      <div class="glass">
        <h2 class="section-title">About</h2>
        <p class="paragraph">Basic about me (edit later).</p>
        <a class="cta" href="https://www.pennbrenn.com" target="_blank" rel="noopener">Learn more</a>
      </div>
    </section>

    <!-- Buy / Estimate -->
    <section id="buy" class="section">
      <div class="glass buy-glass">
        <h2 class="section-title">Buy / Estimate</h2>
        <p class="paragraph">We do not do direct click-and-buy. Each camera is individually quoted and catered to the customer. Lead time up to 1 month.</p>

        <form id="estimate-form" class="estimate-form" autocomplete="off">
          <div class="form-grid">
            <div class="form-item">
              <label for="wrap">Wrap (scrollable select)</label>
              <select id="wrap" name="wrap" size="6" class="scroll-select"></select>
            </div>

            <div class="form-item">
              <label for="accent">Accent</label>
              <select id="accent" name="accent" size="6" class="scroll-select"></select>
            </div>

            <div class="form-item">
              <label for="case">Case</label>
              <select id="case" name="case" size="6" class="scroll-select"></select>
            </div>

            <div class="form-item">
              <label for="storage">Storage</label>
              <select id="storage" name="storage" class="single-select"></select>
            </div>

            <div class="form-item fullwidth">
              <label for="lens">Lens (select all that apply)</label>
              <select id="lens" name="lens" multiple size="5" class="scroll-select"></select>
            </div>

            <div class="form-item">
              <label for="charger">Charger</label>
              <select id="charger" name="charger" size="4" class="scroll-select"></select>
            </div>

            <div class="form-item">
              <label for="battery">Battery</label>
              <select id="battery" name="battery" size="3" class="scroll-select"></select>
            </div>
          </div>

          <div class="extras">
            <label><input type="checkbox" id="include-parts" checked/> Include parts ($15)</label>
            <label><input type="checkbox" id="include-labor" checked/> Include labor ($40)</label>
          </div>

          <div class="contact">
            <input type="text" id="customer-name" placeholder="Your name (optional)" />
            <input type="email" id="customer-email" placeholder="Your email (optional)" />
            <input type="tel" id="customer-phone" placeholder="Phone (optional)" />
          </div>

          <div class="estimate-actions">
            <button type="button" id="generate">Generate Estimate</button>
            <button type="button" id="copy-email">Copy Email Text</button>
            <button type="button" id="open-mail">Open Mail Client</button>
          </div>

          <label for="email-preview">Editable Email Preview</label>
          <textarea id="email-preview" class="email-preview" rows="10"></textarea>

          <div class="note">Lead time: up to 1 month. Shipping and final quote subject to confirmation.</div>
        </form>
      </div>
    </section>

    <!-- Legal -->
    <section id="legal" class="section">
      <div class="glass">
        <h2 class="section-title">Legal</h2>
        <p class="paragraph">Important legal information. Click the button below for full terms.</p>
        <a class="cta" href="./legal.html" target="_blank" rel="noopener">Legal</a>
      </div>
    </section>

    <footer class="footer">
      <div>© Penncamm — handcrafted digital cameras</div>
    </footer>
  </main>

  <script>
    /*************
     * Config & Utilities
     *************/
    const ACCENT = getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#465e73';
    const optionsUrl = 'options.json'; // editable file

    function $(sel){ return document.querySelector(sel); }
    function $all(sel){ return Array.from(document.querySelectorAll(sel)); }

    /* Intersection Observer to update nav highlight */
    const navLinks = $all('.nav-link');
    const sections = $all('section');
    const header = $('#site-header');

    const io = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        const id = entry.target.id;
        const link = document.querySelector(`.nav-link[href="#${id}"]`);
        if(entry.isIntersecting){
          navLinks.forEach(n=>n.classList.remove('active'));
          if(link) link.classList.add('active');
        }
      });
    }, { root: null, threshold: 0.5 });

    sections.forEach(s=>io.observe(s));

    /* Smooth scroll for nav */
    navLinks.forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        const target = document.querySelector(a.getAttribute('href'));
        if(target) target.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    /* Prevent header from covering the section title: add top padding dynamically */
    function adjustMainPadding(){
      const h = header.getBoundingClientRect().height;
      document.documentElement.style.setProperty('--header-h', h + 'px');
      document.body.style.paddingTop = h + 'px';
    }
    window.addEventListener('resize', adjustMainPadding);
    window.addEventListener('load', adjustMainPadding);

    /************
     * Load options.json and populate selects
     ************/
    async function loadOptions(){
      try{
        const res = await fetch(optionsUrl, {cache:'no-store'});
        const data = await res.json();

        // Helper: create <option> nodes with price display
        function fillSelect(elId, list, allowMultiple=false, single=false){
          const el = document.getElementById(elId);
          if(!el) return;
          el.innerHTML = '';
          list.forEach(item=>{
            const opt = document.createElement('option');
            opt.value = item.name;
            opt.dataset.price = item.price || 0;
            opt.textContent = `${item.name} ${item.price ? '(' + formatCurrency(item.price) + ')' : ''}`;
            el.appendChild(opt);
          });
        }

        fillSelect('wrap', data.wrap);
        fillSelect('accent', data.accent);
        fillSelect('case', data.case);
        fillSelect('storage', data.storage);
        fillSelect('lens', data.lens);
        fillSelect('charger', data.charger);
        fillSelect('battery', data.battery);

      }catch(err){
        console.error('Failed to load options.json', err);
      }
    }

    /* Format currency */
    function formatCurrency(n){
      return '$' + Number(n).toFixed(2);
    }

    /*************
     * Estimate generation
     *************/
    function gatherSelections(){
      const getSingle = id => {
        const el = document.getElementById(id);
        return el && el.value ? {name:el.value, price: Number(el.selectedOptions[0]?.dataset.price||0)} : null;
      };
      const getMulti = id => {
        const el = document.getElementById(id);
        if(!el) return [];
        return Array.from(el.selectedOptions).map(o=>({name:o.value, price: Number(o.dataset.price||0)}));
      };
      const selections = [];
      ['wrap','accent','case','storage','charger','battery'].forEach(k=>{
        const s = getSingle(k);
        if(s) selections.push({category:k, ...s});
      });
      const lenses = getMulti('lens');
      lenses.forEach(l => selections.push({category:'lens', ...l}));
      return selections;
    }

    function buildEmailText(){
      const name = $('#customer-name').value.trim();
      const email = $('#customer-email').value.trim();
      const phone = $('#customer-phone').value.trim();
      const includeParts = $('#include-parts').checked;
      const includeLabor = $('#include-labor').checked;

      const selections = gatherSelections();

      let subtotal = selections.reduce((s,i)=>s + (i.price||0), 0);
      let parts = includeParts ? 15 : 0;
      let labor = includeLabor ? 40 : 0;
      let total = subtotal + parts + labor;

      const lines = [];
      lines.push(`Penncamm Quote Request`);
      lines.push(`Lead time: up to 1 month.`);
      lines.push('');
      if(name) lines.push(`Customer: ${name}`);
      if(email) lines.push(`Email: ${email}`);
      if(phone) lines.push(`Phone: ${phone}`);
      lines.push('');
      lines.push('Selected Options:');
      if(selections.length === 0) lines.push(' - (none selected)');
      selections.forEach(s=>{
        lines.push(` - ${s.category.toUpperCase()}: ${s.name} ${s.price ? '(' + formatCurrency(s.price) + ')' : ''}`);
      });
      lines.push('');
      lines.push(`Parts: ${formatCurrency(parts)}`);
      lines.push(`Labor: ${formatCurrency(labor)}`);
      lines.push(`Subtotal (options): ${formatCurrency(subtotal)}`);
      lines.push(`Total estimate: ${formatCurrency(total)}`);
      lines.push('');
      lines.push('Questions / Notes:');
      lines.push('(Add questions here...)');

      return {text: lines.join('\\n'), total, selections};
    }

    document.getElementById('generate').addEventListener('click', ()=>{
      const out = buildEmailText();
      $('#email-preview').value = out.text;
    });

    document.getElementById('copy-email').addEventListener('click', async ()=>{
      const text = $('#email-preview').value || buildEmailText().text;
      try{
        await navigator.clipboard.writeText(text);
        alert('Email text copied to clipboard.');
      }catch(e){
        // fallback
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        alert('Email text copied to clipboard.');
      }
    });

    document.getElementById('open-mail').addEventListener('click', ()=>{
      const previewText = $('#email-preview').value || buildEmailText().text;
      const subject = encodeURIComponent('Penncamm Quote Request');
      const body = encodeURIComponent(previewText);
      // open mail client to cam@pennbrenn.com
      const mailto = `mailto:cam@pennbrenn.com?subject=${subject}&body=${body}`;
      window.location.href = mailto;
    });

    /************
     * Initialize
     ************/
    window.addEventListener('load', async ()=>{
      adjustMainPadding();
      await loadOptions();
      // pre-generate the preview
      $('#email-preview').value = buildEmailText().text;
    });

  </script>
</body>
</html>
